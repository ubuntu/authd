> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username:
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
> r
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
> r
== Authentication method selection ==
  1. Use your phone +33...
  2. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
> r
== Authentication method selection ==
  1. Use your phone +33...
  2. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
> r
== Authentication method selection ==
  1. Use your phone +33...
  2. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
>
== Password reset ==
Enter 'r' to cancel the request and go back to choose the provider
Enter your new password:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
> r
== Authentication method selection ==
  1. Use your phone +33...
  2. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
>
== Password reset ==
Enter 'r' to cancel the request and go back to choose the provider
Enter your new password:
>
Confirm Password:
>
────────────────────────────────────────────────────────────────────────────────
> ./pam_authd passwd socket=${AUTHD_TEST_TAPE_SOCKET} force_native_client=true
Username: user-mfa-integration-native-passwd
== Provider selection ==
  1. local
  2. ExampleBroker
Or enter 'r' to go back to user selection
Choose your provider:
> 2
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Authentication method selection ==
  1. Password authentication
  2. Send URL to user-mfa-integration-native-passwd@gmail.com
  3. Use your fido device foo
  4. Use your phone +33...
  5. Use your phone +1...
  6. Pin code
  7. Use a QR code
  8. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Password authentication ==
Enter 'r' to cancel the request and go back to select the authentication method
Gimme your password:
>
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
> r
== Authentication method selection ==
  1. Use your fido device foo
  2. Use your phone +33...
  3. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your fido device foo ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Plug your fido device and press with your thumb:
>
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
> r
== Authentication method selection ==
  1. Use your phone +33...
  2. Authentication code
Or enter 'r' to go back to choose the provider
Choose your authentication method:
> 1
== Use your phone +33... ==
Press Enter to wait for authentication or enter 'r' to go back to select the authentication meth
od
Unlock your phone +33... or accept request on web interface:
>
== Password reset ==
Enter 'r' to cancel the request and go back to choose the provider
Enter your new password:
>
Confirm Password:
>
PAM ChangeAuthTok()
  User: "user-mfa-integration-native-passwd"
  Result: success
PAM AcctMgmt()
  User: "user-mfa-integration-native-passwd"
  Result: success
>
────────────────────────────────────────────────────────────────────────────────
